/* version 1.4; date 20180517 */
var DcUI=DcUI||{};(function(e,c,h){var a=Array.isArray||function(i){return typeof i==="object"&&Object.prototype.toString.call(i)==="[object Array]"};var g=function(i){return Object.prototype.toString.call(i)==="[object Function]"};function f(){return{width:window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,height:window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight}}function d(j){if(e(j.obj).length==0){return}this._settings=e.extend({obj:null,effect:"fade",autoPlay:true,start:0,duration:800,holdTime:3000,effectDuration:3000,onOneLoaded:null,onAllLoaded:null,beforeSwitch:null,afterSwitch:null,mouseDrag:false,PCMinSize:1024,_holdAfterHover:true},j||{});var l=e(this._settings.obj),F=this;var H=["fade","slide","slide-vertical","shift-left","shift-right","shift-up","shift-down","turn-left","turn-right","turn-up","turn-down"],Q=["turn-left","turn-right","turn-up","turn-down"],o=["unfold","unfold-vertical"];this._settings._supportEffects=H.concat(o);if(F._settings._supportEffects.indexOf(this._settings.effect)<0){this._settings.effect="fade"}l.addClass("dc-SlideShow");var p=l.children("ul").addClass("slides-list"),D=p.children("li").addClass("slide-item"),m=D.length,y=this._settings.start%m,A=y,N=0,r=[],s=false,P=null,i,M,L,O,B,u=false;D.removeClass("active").eq(y).addClass("active");this.mobile=false;var I=navigator&&navigator.userAgent;if(f().width<this._settings.PCMinSize){this.mobile=true;l.addClass("mobile-device")}R();var k=document.createElement("img");r[0]=this.mobile&&D.first().attr("mb-bg-src")?D.first().attr("mb-bg-src"):D.first().attr("bg-src");if(r[0]){k.src=r[0];e(k).one("load",function(){if(L==0){L=this.height*M/this.width;l.height(L)}l.addClass("loading");D.first().css("background-image","url("+r[0]+")");N++;g(F._settings.onOneLoaded)&&F._settings.onOneLoaded(D.first(),0);E()});if(k.complete){e(k).load()}}this.setOption=function(T,U){if(typeof T==="object"){for(var S in T){F._settings[S]=T[S]}}else{if(typeof T==="string"&&!!U){F._settings[T]=U}}};this.startAutoPlay=function(){J(true);F._settings.isAutoPlay=true};this.stopAutoPlay=function(){J(false);F._settings.isAutoPlay=false};this.setEffectMode=function(S){if(F._settings._supportEffects.indexOf(S)<0){S="fade"}F._settings.effect=S;n()};function n(){var S=F._settings.effect;B=l.find(".effect-layer");if(B.length>0){B.empty()}else{l.append('<div class="effect-layer"></div>');B=l.find(".effect-layer")}B.attr("class","effect-layer "+S);if(H.indexOf(F._settings.effect)>-1){if(Q.indexOf(F._settings.effect)>-1){B.append('<div class="effect-slide curr-slide"></div> <div class="stage-3d-effect"><div class="effect-slide next-slide"></div></div>')}else{B.append('<div class="effect-slide curr-slide"></div> <div class="effect-slide next-slide"></div>')}}else{if(o.indexOf(F._settings.effect)>-1){B.addClass("stage-3d-effect").append('<div class="effect-slide curr-slide"></div> <div class="effect-slide next-slide"></div><div class="unfold-effect-slides"><div class="unfold-front"></div><div class="unfold-back"></div></div>')}}}function x(U,T,V){s=true;var S=F._settings.effect;A=T;D.removeClass("has-transition active").eq(A).addClass("active");D.addClass("hidden");B.addClass("show-effect");g(F._settings.beforeSwitch)&&F._settings.beforeSwitch(D.eq(T),U<0?null:D.eq(U));if(H.indexOf(F._settings.effect)>-1){U>=0&&B.find(".curr-slide").css("background-image","url("+r[U]+")");B.find(".next-slide").css("background-image","url("+r[T]+")");B.find(".effect-slide").css("animationDuration",F._settings.duration/1000+"s")}else{if(o.indexOf(F._settings.effect)>-1){}}U>=0&&B.find(".curr-slide,.unfold-front").css("background-image","url("+r[U]+")");B.find(".next-slide,.unfold-back").css("background-image","url("+r[T]+")");B.find(".unfold-effect-slides").css("animationDuration",F._settings.duration/1000+"s");if(V){B.addClass("reverse")}G();setTimeout(function(){g(F._settings.afterSwitch)&&F._settings.afterSwitch(D.eq(T),D.eq(U));D.removeClass("hidden");B.removeClass("show-effect reverse");if(H.indexOf(F._settings.effect)>-1){B.find(".curr-slide").attr("class","effect-slide curr-slide");B.find(".next-slide").attr("class","effect-slide next-slide")}s=false},F._settings.duration)}function R(){M=l.width();L=l.height();n()}function q(){z();t();F._settings.autoPlay&&J(true)}function z(){var V=e('<div class="slide-controls"> <ul class="slide-bullets"></ul> </div>'),S="";for(var T=0;T<m;T++){S+='<li class="slide-bullet"></li>'}V.find(".slide-bullets").append(S);if(!F.mobile){var U='<div class="slide-hotarea prev"><span class="slide-btn"></span></div><div class="slide-hotarea next"><span class="slide-btn "></span></div>';e(U).appendTo(V)}V.appendTo(l);O=l.find(".slide-bullet");O.eq(y).addClass("active")}function t(){l.find(".slide-bullet").click(function(T){if(s){return}i=e(this).index();if(i==A){return}x(A,i,i<A)});var S=F._settings.effect;if(!F.mobile){l.on("click",".slide-hotarea",function(T){if(s){return}if(e(this).hasClass("prev")){i=w(A-1);
    x(A,i,true)}if(e(this).hasClass("next")){i=w(A+1);x(A,i,false)}});if(F._settings._holdAfterHover){l.hover(function(){J(false)},function(){F._settings.autoPlay&&J(true)})}}v();p.get(0).addEventListener("click",function(T){if(u){T.preventDefault();T.stopPropagation();T.stopImmediatePropagation()}},true)}function v(){var W=new b(F._settings.obj,{mouseDrag:F._settings.mouseDrag});var T=A,S=false,V,U;W.onStart=function(Y,X,Z){if(s){return}D.removeClass("has-transition");S=true;J(false);T=A;V=U=0;u=false};W.onMove=function(ab,X,ac,Z,Y){if(Z!=0){if(Math.abs(Z)>5||Math.abs(Y)>5){u=true}U=Z%M;var aa=Math.floor(Z/M);aa>=0&&(aa+=1);i=w(T-aa);if(Z<0){A=w(i-1);V=M+U}else{if(Z>0){A=w(i+1);V=U-M}}D.each(function(ad,ae){if(ad==A){e(this).addClass("draging").css("transform","translate3d("+U+"px,0,0)")}else{if(ad==i){e(this).addClass("draging").css("transform","translate3d("+V+"px,0,0)")}else{e(this).css("transform","translate3d(-"+M+"px,0,0)")}}});G()}};W.onEnd=function(Z,ab,aa,Y,X){if(s){return}if(S){S=false;D.removeClass("draging");if(Math.abs(U)/M>0.1){C(true,T,U)}else{C(false,T,U)}F._settings.autoPlay&&J(true)}setTimeout(function(){u=false},0)}}function K(){var S=[];if(a(F._settings.holdTime)){S=this._settings.holdTime}else{for(var T=0;T<m;T++){S[T]=F._settings.holdTime}}P=setInterval(function(){var U=w(A+1);x(A,U)},S[A])}function J(S){clearInterval(P);if(S){K()}}function C(U,T,S){if(A==i){return}D.addClass("has-transition");var V=0,W=0;if(U){W=0;V=S<0?-1*M:M}else{V=0;W=S<0?-1*M:M}D.eq(A).css("transform","translate3d("+V+"px,0,0)");D.eq(i).css("transform","translate3d("+W+"px,0,0)");A=U?i:A;T!=A&&g(F._settings.beforeSwitch)&&F._settings.beforeSwitch(D.eq(A),D.eq(T));G();D.removeClass("active").eq(A).addClass("active");setTimeout(function(){D.removeClass("has-transition");D.css("transform","translate3d(0,0,0");T!=A&&g(F._settings.afterSwitch)&&F._settings.afterSwitch(D.eq(A),D.eq(T))},300)}function G(){O.removeClass("active").eq(A).addClass("active")}function w(S){return S%m>=0?S%m:S%m+m}function E(){D.each(function(S,U){if(S>0){r[S]=F.mobile&&e(this).attr("mb-bg-src")?e(this).attr("mb-bg-src"):e(this).attr("bg-src");if(r[S]){var T=document.createElement("img");T.src=r[S];e(T).one("load",function(){D.eq(S).css("background-image","url("+r[S]+")");N++;g(F._settings.onOneLoaded)&&F._settings.onOneLoaded(D.eq(S),S);if(N==m){l.removeClass("loading").addClass("loaded");q();g(F._settings.onAllLoaded)&&F._settings.onAllLoaded()}});if(T.complete){e(T).load()}}}})}}function b(k,u){if(!k){return}var n=e(k),q=this;q._settings=e.extend({mouseDrag:true},u||{});q.touchable=("ontouchstart" in window)||window.DocumentTouch&&document instanceof DocumentTouch;var i=q.touchable?{start:"touchstart",move:"touchmove",end:"touchend"}:q._settings.mouseDrag?{start:"mousedown",move:"mousemove",end:"mouseup"}:{start:null,move:null,end:null};if(n.length<1){return}q.onStart=q._settings.onStart;q.onMove=q._settings.onMove;q.onEnd=q._settings.onEnd;var p,o,t,s;l();function l(){for(var v=0;v<n.length;v++){i.start&&n[v].addEventListener(i.start,j,false)}}function j(z){var v,B,w;if(q.touchable){var A=z.touches[0];v=Number(A.pageX);B=Number(A.pageY);w=z.target}else{v=Number(z.pageX);B=Number(z.pageY);w=document}t=p=v;s=o=B;w.addEventListener(i.move,m,false);w.addEventListener(i.end,r,false);q.onStart&&typeof q.onStart=="function"&&q.onStart(z,v,B,w)}function m(B){var v,D,A;if(q.touchable){var C=B.touches[0];v=Number(C.pageX);D=Number(C.pageY);A=B.target}else{v=Number(B.pageX);D=Number(B.pageY);A=document}t=v;s=D;var z=v-p,w=D-o;if(Math.abs(w)<Math.abs(z)){B.preventDefault()}q.onMove&&typeof q.onMove=="function"&&q.onMove(B,v,D,z,w,A)}function r(w){var v=q.touchable?w.target:document;v.removeEventListener(i.move,m,false);v.removeEventListener(i.end,r,false);q.onEnd&&typeof q.onEnd=="function"&&q.onEnd(w,p,o,t,s,v)}}c.dcSlideShow=d;c.dcDrag=b})(jQuery,DcUI);
